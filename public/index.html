<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ace of Spades Roleplay - FiveM Roleplay Server</title>
    <link rel="icon" type="image/x-icon" href="/images/logo.png">

    <!-- Staff Page React -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        /* Reset and base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #000;
            color: #e9e9e9;
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Authentication Modal Styles */
        .auth-modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
        }

        .auth-modal-content {
            background: #1a1a1a;
            margin: 5% auto;
            padding: 30px;
            border: 2px solid #a61000;
            border-radius: 15px;
            width: 90%;
            max-width: 400px;
            position: relative;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: #a61000;
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .auth-input {
            padding: 12px;
            background: #0f0f0f;
            border: 1px solid #460101;
            border-radius: 5px;
            color: #e9e9e9;
            font-size: 16px;
        }

        .auth-input:focus {
            outline: none;
            border-color: #a61000;
        }

        .auth-button {
            padding: 12px;
            background: #a61000;
            border: none;
            border-radius: 5px;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .auth-button:hover {
            background: #460101;
        }

        .auth-button:disabled {
            background: #666;
            cursor: not-allowed;
        }

        .discord-button {
            background: #5865F2;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .discord-button:hover {
            background: #4752C4;
        }

        .auth-divider {
            text-align: center;
            color: #666;
            margin: 10px 0;
            position: relative;
        }

        .auth-divider::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: #460101;
        }

        .auth-divider span {
            background: #1a1a1a;
            padding: 0 15px;
        }

        .auth-switch {
            text-align: center;
            margin-top: 15px;
            color: #666;
        }

        .auth-switch a {
            color: #a61000;
            text-decoration: none;
            cursor: pointer;
        }

        .auth-switch a:hover {
            text-decoration: underline;
        }

        /* Navigation Styles */
        .navbar {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(26, 26, 26, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            border-bottom: 2px solid #a61000;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            height: 80px;
        }

        .nav-left, .nav-right {
            display: flex;
            align-items: center;
            gap: 30px;
            flex: 1;
        }

        .nav-right {
            justify-content: flex-end;
        }

        .logo {
            height: 60px;
            width: auto;
        }

        .nav-link {
            color: #e9e9e9;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
            position: relative;
            cursor: pointer;
            user-select: none;
        }

        .nav-link:hover {
            color: #a61000;
        }

        .footer-section ul li span {
            color: #b0b0b0;
            text-decoration: none;
            transition: color 0.3s ease;
            cursor: pointer;
            user-select: none;
        }

        .footer-section ul li span:hover {
            color: #a61000;
        }

        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            top: 100%;
            right: 0;
            background: #1a1a1a;
            min-width: 160px;
            border: 1px solid #a61000;
            border-radius: 5px;
            z-index: 1;
        }

        .dropdown:hover .dropdown-content {
            display: block;
        }

        .dropdown-content span {
            color: #e9e9e9;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            cursor: pointer;
            user-select: none;
        }

        .dropdown-content span:hover {
            background: #a61000;
        }

        .secondary-navbar {
            position: fixed;
            top: 80px;
            width: 100%;
            background: rgba(166, 16, 0, 0.9);
            backdrop-filter: blur(10px);
            z-index: 999;
            padding: 10px 0;
            text-align: center;
        }

        .auth-links {
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .auth-link {
            color: white;
            text-decoration: none;
            font-weight: 500;
            padding: 8px 16px;
            border-radius: 5px;
            transition: background 0.3s ease;
            cursor: pointer;
        }

        .auth-link:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .user-info {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            color: white;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: 2px solid #a61000;
        }

        .logout-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .logout-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .hidden {
            display: none !important;
        }

        /* Page Styles */
        .page {
            min-height: 100vh;
            padding-top: 120px;
        }

        /* Banner Styles */
        .banner {
            height: 70vh;
            background: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.6)),
                        url('https://wallpapers.com/images/high/4k-gta-5-trevor-philips-in-forest-w1hmw9taudjj5rfh.webp');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
        }

        .banner-content {
            z-index: 1;
        }

        .banner h1 {
            font-size: 4rem;
            font-weight: bold;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }

        .banner p {
            font-size: 1.5rem;
            margin-bottom: 30px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
        }

        .cta-button {
            display: inline-block;
            background: #a61000;
            color: white;
            padding: 15px 30px;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            font-size: 1.1rem;
            transition: background 0.3s ease;
            cursor: pointer;
            border: none;
        }

        .cta-button:hover {
            background: #460101;
        }

        /* Main Content Styles */
        .main-content {
            padding: 80px 0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Features Section */
        .features-section {
            margin-bottom: 80px;
        }

        .features-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            position: relative;
        }

        .feature-side {
            padding: 40px;
            border-radius: 15px;
            position: relative;
        }

        .vmenu {
            background: linear-gradient(135deg, #a61000, #460101);
        }

        .qbcore {
            background: linear-gradient(135deg, #1e40af, #0f172a);
        }

        .feature-title {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 30px;
            text-align: center;
        }

        .feature-list {
            list-style: none;
        }

        .feature-list li {
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 1.1rem;
        }

        .feature-list li:last-child {
            border-bottom: none;
        }

        /* Content Section */
        .content-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 60px;
            align-items: center;
        }

        .content-section:nth-child(even) {
            direction: rtl;
        }

        .content-section:nth-child(even) > * {
            direction: ltr;
        }

        .content-image {
            border-radius: 15px;
            overflow: hidden;
        }

        .content-image img {
            width: 100%;
            height: 300px;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .content-image:hover img {
            transform: scale(1.05);
        }

        .content-title {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 20px;
            color: #a61000;
        }

        .content-description {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #b0b0b0;
        }

        /* Dashboard Styles */
        .dashboard-container {
            padding-top: 60px;
            min-height: 100vh;
        }

        .dashboard-tabs {
            display: flex;
            background: #460101;
            border-radius: 10px 10px 0 0;
            overflow-x: auto;
            margin-bottom: 0;
        }

        .dashboard-tab {
            background: transparent;
            border: none;
            color: #e9e9e9;
            padding: 15px 25px;
            cursor: pointer;
            transition: background 0.3s ease;
            white-space: nowrap;
            font-size: 16px;
        }

        .dashboard-tab.active {
            background: #a61000;
        }

        .dashboard-tab:hover {
            background: #a61000;
        }

        .dashboard-content {
            background: #1a1a1a;
            min-height: 600px;
            border-radius: 0 0 10px 10px;
            padding: 30px;
        }

        .dashboard-tab-content {
            display: none;
        }

        .dashboard-tab-content:not(.hidden) {
            display: block;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: #0f0f0f;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #a61000;
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #a61000;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #e9e9e9;
            font-size: 0.9rem;
        }

        /* Department Styles */
        .department-header {
            width: 100%;
            height: 300px;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 15px;
            margin-bottom: 30px;
            position: relative;
        }

        .department-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
        }

        .department-title {
            font-size: 3rem;
            font-weight: bold;
            color: white;
            z-index: 1;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }

        .coc-section {
            background: #0f0f0f;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .member-card {
            background: #1a1a1a;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .member-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #a61000;
        }

        .access-denied {
            text-align: center;
            padding: 50px;
            background: #460101;
            border-radius: 10px;
            color: #e9e9e9;
        }

        .empty-content {
            text-align: center;
            padding: 50px;
            background: #0f0f0f;
            border-radius: 10px;
            color: #666;
        }

        /* Action Buttons */
        .action-btn {
            padding: 8px 15px;
            margin: 0 5px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: opacity 0.3s ease;
        }

        .action-btn:hover {
            opacity: 0.8;
        }

        .edit-btn {
            background: #a61000;
            color: white;
        }

        .ban-btn {
            background: #dc3545;
            color: white;
        }

        .kick-btn {
            background: #ffc107;
            color: black;
        }

        .link-btn {
            background: #28a745;
            color: white;
        }

        /* Settings Table */
        .settings-table {
            width: 100%;
            background: #0f0f0f;
            border-radius: 10px;
            overflow: hidden;
            border-collapse: collapse;
        }

        .settings-table th,
        .settings-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #460101;
        }

        .settings-table th {
            background: #a61000;
            font-weight: bold;
            color: white;
        }

        .settings-table td {
            color: #e9e9e9;
        }

        /* Account Management */
        .account-section {
            background: #0f0f0f;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .account-section h3 {
            color: #a61000;
            margin-bottom: 20px;
        }

        .discord-status {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: #1a1a1a;
            border-radius: 5px;
            margin-bottom: 15px;
        }

        /* Footer */
        .footer {
            background: #0f0f0f;
            padding: 40px 0 20px 0;
            border-top: 2px solid #a61000;
            margin-top: 80px;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
        }

        .footer-section h3 {
            color: #a61000;
            margin-bottom: 20px;
            font-size: 1.2rem;
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 10px;
        }

        .footer-section ul li a {
            color: #b0b0b0;
            text-decoration: none;
            transition: color 0.3s ease;
            cursor: pointer;
        }

        .footer-section ul li a:hover {
            color: #a61000;
        }

        .footer-logo {
            height: 50px;
            width: auto;
            margin-bottom: 15px;
        }

        .social-links {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .social-link {
            display: inline-block;
            width: 40px;
            height: 40px;
            background: #a61000;
            color: white;
            text-align: center;
            line-height: 40px;
            border-radius: 50%;
            text-decoration: none;
            transition: background 0.3s ease;
        }

        .social-link:hover {
            background: #460101;
        }

        .footer-bottom {
            text-align: center;
            padding: 20px 0;
            border-top: 1px solid #460101;
            margin-top: 30px;
            color: #666;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
                height: auto;
                padding: 15px 20px;
            }

            .nav-left, .nav-right {
                gap: 20px;
            }

            .banner h1 {
                font-size: 2.5rem;
            }

            .banner p {
                font-size: 1.2rem;
            }

            .features-container {
                grid-template-columns: 1fr;
                gap: 30px;
            }

            .content-section {
                grid-template-columns: 1fr;
                gap: 30px;
            }

            .content-section:nth-child(even) {
                direction: ltr;
            }

            .department-title {
                font-size: 2rem;
            }

            .dashboard-tabs {
                flex-wrap: wrap;
            }

            .settings-table {
                font-size: 14px;
            }

            .settings-table th,
            .settings-table td {
                padding: 10px 8px;
            }
        }

        /* Page-specific styles */
        .page-container {
            padding-top: 40px;
            min-height: 100vh;
        }

        .page-title {
            font-size: 3rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 40px;
            color: #a61000;
        }

        .page-content {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 20px;
        }




        /* Staff Panel */
        /* Staff Panel */
        /* Staff Panel */

        .staff-container {
            width: 100%;
            min-height: 500px;
            background: #1a1a1a;
            border-radius: 10px;
            padding: 20px;
        }
    </style>
</head>
<body>
    <!-- Authentication Modals -->
    <div id="loginModal" class="auth-modal">
        <div class="auth-modal-content">
            <span class="close" onclick="closeModal('loginModal')">&times;</span>
            <h2 style="color: #a61000; margin-bottom: 20px;">Login to Dashboard</h2>
            <form id="loginForm" class="auth-form">
                <input type="email" id="loginEmail" class="auth-input" placeholder="Email" required>
                <input type="password" id="loginPassword" class="auth-input" placeholder="Password" required>
                <button type="submit" class="auth-button">Login</button>
            </form>
            <div class="auth-divider">
                <span>OR</span>
            </div>
            <button type="button" class="auth-button discord-button" onclick="loginWithDiscord()">
                <span>🎮</span> Login with Discord
            </button>
            <div class="auth-switch">
                Don't have an account? <a onclick="switchModal('loginModal', 'registerModal')">Sign up</a>
            </div>
        </div>
    </div>

    <div id="registerModal" class="auth-modal">
        <div class="auth-modal-content">
            <span class="close" onclick="closeModal('registerModal')">&times;</span>
            <h2 style="color: #a61000; margin-bottom: 20px;">Create Account</h2>
            <form id="registerForm" class="auth-form">
                <input type="email" id="registerEmail" class="auth-input" placeholder="Email" required>
                <input type="text" id="registerUsername" class="auth-input" placeholder="Username" required>
                <input type="password" id="registerPassword" class="auth-input" placeholder="Password" required>
                <input type="password" id="registerConfirmPassword" class="auth-input" placeholder="Confirm Password" required>
                <button type="submit" class="auth-button">Create Account</button>
            </form>
            <div class="auth-divider">
                <span>OR</span>
            </div>
            <button type="button" class="auth-button discord-button" onclick="loginWithDiscord()">
                <span>🎮</span> Sign up with Discord
            </button>
            <div class="auth-switch">
                Already have an account? <a onclick="switchModal('registerModal', 'loginModal')">Sign in</a>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-left">
                <span class="nav-link" onclick="showPage('home')">Home</span>
                <span class="nav-link" onclick="showPage('forums')">Forums</span>
            </div>
            <div class="nav-center">
                <img src="images/logo.png" alt="Ace of Spades Roleplay" class="logo" onclick="showPage('home')" style="cursor: pointer;">
            </div>
            <div class="nav-right">
                <div class="dropdown">
                    <span class="nav-link">Server Information ▼</span>
                    <div class="dropdown-content">
                        <span onclick="showPage('rules')">Rules</span>
                        <span onclick="showPage('faq')">FAQ</span>
                    </div>
                </div>
                <a href="https://discord.gg/4Nc7smkA" class="nav-link" target="_blank">Discord</a>
                <div id="mainAuthLinks">
                    <span class="nav-link" onclick="openDashboard()">Dashboard</span>
                </div>
                <div class="user-info hidden" id="mainUserInfo">
                    <img id="mainUserAvatar" src="" alt="Avatar" class="user-avatar">
                    <span id="mainWelcomeMessage" class="nav-link">Welcome, User!</span>
                    <span class="nav-link" onclick="showPage('dashboard')">Dashboard</span>
                    <button class="logout-btn" onclick="logout()" style="margin-left: 10px;">Logout</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Secondary Navigation -->
    <div class="secondary-navbar">
        <div class="auth-links" id="authLinks">
            <a class="auth-link" onclick="openDashboard()">Dashboard</a>
        </div>
        <div class="user-info hidden" id="userInfo">
            <img id="userAvatar" src="" alt="Avatar" class="user-avatar">
            <span id="welcomeMessage">Welcome, User!</span>
            <button class="logout-btn" onclick="logout()">Logout</button>
        </div>
    </div>

    <!-- Home Page -->
    <div id="home-page" class="page">
        <!-- Banner -->
        <div class="banner">
            <div class="banner-content">
                <h1>Ace of Spades Roleplay</h1>
                <p>The Ultimate FiveM Roleplay Experience</p>
                <button class="cta-button" onclick="openDashboard()">Join Our Community</button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="container">
                <!-- Features Section -->
                <div class="features-section">
                    <div class="features-container">
                        <div class="feature-side vmenu">
                            <h2 class="feature-title">vMenu</h2>
                            <ul class="feature-list">
                                <li>Complete vehicle spawning system</li>
                                <li>Advanced player options menu</li>
                                <li>Weather and time controls</li>
                                <li>Teleportation system</li>
                                <li>Weapon management</li>
                                <li>Character customization</li>
                                <li>Admin tools integration</li>
                            </ul>
                        </div>
                        <div class="feature-side qbcore">
                            <h2 class="feature-title">QBCore</h2>
                            <ul class="feature-list">
                                <li>Advanced economy system</li>
                                <li>Realistic job framework</li>
                                <li>Housing and property system</li>
                                <li>Vehicle ownership</li>
                                <li>Banking and finance</li>
                                <li>Inventory management</li>
                                <li>Police and EMS systems</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Content Sections -->
                <div class="content-section">
                    <div class="content-image">
                        <img src="https://s3-gallery.int-cdn.lcpdfrusercontent.com/monthly_2020_12/large.1526416283_Screenshot(1574).png.074f81edd5e4b59b76ccf2942a4945a7.png" alt="Police Department">
                    </div>
                    <div class="content-text">
                        <h3 class="content-title">Law Enforcement</h3>
                        <p class="content-description">Join the King County Sheriff's Office or State Police and help maintain law and order across the county. With realistic police procedures, advanced dispatch systems, and authentic equipment, experience what it's like to be a real law enforcement officer.</p>
                    </div>
                </div>

                <div class="content-section">
                    <div class="content-image">
                        <img src="https://i.etsystatic.com/46067077/r/il/3f3d16/5888096579/il_fullxfull.5888096579_ikod.jpg" alt="Medical Services">
                    </div>
                    <div class="content-text">
                        <h3 class="content-title">Emergency Medical Services</h3>
                        <p class="content-description">Save lives as a paramedic or doctor in our advanced medical system. Respond to emergencies, perform complex medical procedures, and work alongside law enforcement to keep the citizens safe and healthy.</p>
                    </div>
                </div>

                <div class="content-section">
                    <div class="content-image">
                        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS685suCiDEdBeH6CSs08O76tsw4R8F-tWJqA&s" alt="Business District">
                    </div>
                    <div class="content-text">
                        <h3 class="content-title">Business Empire</h3>
                        <p class="content-description">Build your criminal empire or legitimate business in Ace of Spades Roleplay. From street-level hustling to corporate boardrooms, create your own path to success with our dynamic economy system and player-driven market.</p>
                    </div>
                </div>

                <div class="content-section">
                    <div class="content-image">
                        <img src="https://i.ytimg.com/vi/9Oim_V_yi88/maxresdefault.jpg" alt="Community Events">
                    </div>
                    <div class="content-text">
                        <h3 class="content-title">Community Events</h3>
                        <p class="content-description">Participate in regular community events, car shows, racing tournaments, and special roleplay scenarios. Our active community and dedicated event team ensure there's always something exciting happening in Ace of Spades Roleplay.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Dashboard Page -->
    <div id="dashboard-page" class="page hidden">
        <div class="dashboard-container">
            <div class="container">
                <div class="dashboard-tabs">
                    <button class="dashboard-tab active" onclick="showDashboardTab('dashboard')">Dashboard</button>
                    <button class="dashboard-tab" onclick="showDashboardTab('account')">Account</button>
                    <button class="dashboard-tab" onclick="showDashboardTab('staff')" style="display: none;" id="staffTab">Staff</button>
                    <button class="dashboard-tab" onclick="showDashboardTab('kcso')" style="display: none;" id="kcsoTab">KCSO</button>
                    <button class="dashboard-tab" onclick="showDashboardTab('msp')" style="display: none;" id="mspTab">MSP</button>
                    <button class="dashboard-tab" onclick="showDashboardTab('mfd')" style="display: none;" id="mfdTab">MFD</button>
                    <button class="dashboard-tab" onclick="showDashboardTab('settings')" style="display: none;" id="settingsTab">Settings</button>
                </div>

                <div class="dashboard-content">
                    <!-- Dashboard Tab -->
                    <div id="dashboard-tab" class="dashboard-tab-content">
                        <h2 style="color: #a61000; margin-bottom: 30px;">Server Statistics</h2>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-value" id="stat-online-now">0</div>
                                <div class="stat-label">Online Now</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="stat-total-playtime">0</div>
                                <div class="stat-label">Total Users</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="stat-total-deaths">0</div>
                                <div class="stat-label">Discord Linked</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="stat-total-arrests">0</div>
                                <div class="stat-label">Staff Members</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="stat-ems-calls">0</div>
                                <div class="stat-label">Active Players</div>
                            </div>
                        </div>

                        <div class="coc-section">
                            <h3 style="color: #a61000; margin-bottom: 20px;">📊 Server Information</h3>
                            <div class="member-card">
                                <div style="background: #00ff00; width: 12px; height: 12px; border-radius: 50%; margin-right: 10px;"></div>
                                <div>
                                    <h4 style="color: #e9e9e9;">Server Status: Online</h4>
                                    <p style="color: #666;">Connect: 127.0.0.1:30120</p>
                                </div>
                            </div>
                            <div class="member-card">
                                <div style="background: #a61000; width: 12px; height: 12px; border-radius: 50%; margin-right: 10px;"></div>
                                <div>
                                    <h4 style="color: #e9e9e9;">Discord Integration Active</h4>
                                    <p style="color: #666;">Automatic role synchronization enabled</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Account Tab -->
                    <div id="account-tab" class="dashboard-tab-content hidden">
                        <h2 style="color: #a61000; margin-bottom: 30px;">Account Management</h2>
                        
                        <div class="account-section">
                            <h3>Profile Information</h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                                <div>
                                    <strong>Username:</strong> <span id="profileUsername">-</span>
                                </div>
                                <div>
                                    <strong>Email:</strong> <span id="profileEmail">-</span>
                                </div>
                                <div>
                                    <strong>Roles:</strong> <span id="profileRoles">-</span>
                                </div>
                                <div>
                                    <strong>Last Login:</strong> <span id="profileLastLogin">-</span>
                                </div>
                            </div>
                        </div>

                        <div class="account-section">
                            <h3>Discord Integration</h3>
                            <div class="discord-status">
                                <div id="discordInfo">
                                    <div><strong>Status:</strong> <span id="discordStatusText">Not Connected</span></div>
                                    <div><strong>Discord Username:</strong> <span id="discordUsername">-</span></div>
                                </div>
                                <div>
                                    <button id="discordActionBtn" class="action-btn link-btn" onclick="linkDiscord()">Link Discord</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Staff Tab -->
                    <div id="staff-tab" class="dashboard-tab-content hidden">
                        <div id="staff-react-root" style="min-height: 400px;">
                            <!-- Component renders here -->
                        </div>
                    </div>

                    <!-- Department Tabs -->
                    <div id="kcso-tab" class="dashboard-tab-content hidden">
                    </div>

                    <div id="msp-tab" class="dashboard-tab-content hidden">
                        <div class="department-header" style="background-image: url('https://images.unsplash.com/photo-1586829135343-132950070391?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80');">
                            <h1 class="department-title">State Police</h1>
                        </div>
                        <div id="msp-content">
                            <div class="empty-content">
                                <h3>📋 Loading Department Information...</h3>
                                <p>Department content is being loaded.</p>
                            </div>
                        </div>
                    </div>

                    <div id="mfd-tab" class="dashboard-tab-content hidden">
                        <div class="department-header" style="background-image: url('https://images.unsplash.com/photo-1540553016722-983e48a2cd10?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80');">
                            <h1 class="department-title">Metro Fire Department</h1>
                        </div>
                        <div id="mfd-content">
                            <div class="empty-content">
                                <h3>📋 Loading Department Information...</h3>
                                <p>Department content is being loaded.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Settings Tab -->
                    <div id="settings-tab" class="dashboard-tab-content hidden">
                        <h2 style="color: #a61000; margin-bottom: 30px;">Admin Panel - User Management</h2>
                        <div id="settings-content">
                            <div class="empty-content">
                                <h3>⚙️ Loading Admin Tools...</h3>
                                <p>Admin tools and user management will be loaded here.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Forums Page -->
    <div id="forums-page" class="page hidden">
        <div class="page-container">
            <div class="container">
                <h1 class="page-title">Community Forums</h1>
                <div class="page-content">
                    <div class="empty-content">
                        <h3>💬 Forums Coming Soon</h3>
                        <p>Our community forums are currently being set up. Check back soon for discussions, announcements, and more!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Rules Page -->
    <div id="rules-page" class="page hidden">
        <div class="page-container">
            <div class="container">
                <h1 class="page-title">Server Rules</h1>
                <div class="page-content">
                    <div class="empty-content">
                        <h3>📜 Rules Coming Soon</h3>
                        <p>Our server rules are being finalized. Please check back soon for the complete ruleset.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- FAQ Page -->
    <div id="faq-page" class="page hidden">
        <div class="page-container">
            <div class="container">
                <h1 class="page-title">Frequently Asked Questions</h1>
                <div class="page-content">
                    <div class="empty-content">
                        <h3>❓ FAQ Coming Soon</h3>
                        <p>We're compiling the most frequently asked questions. Check back soon for helpful answers!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <img src="images/logo.png" alt="Ace of Spades Roleplay" class="footer-logo">
                <h3>Ace of Spades Roleplay</h3>
                <p>The premier FiveM roleplay experience. Join our community and create your own story.</p>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><span onclick="showPage('home')" style="cursor: pointer;">Home</span></li>
                    <li><span onclick="showPage('forums')" style="cursor: pointer;">Forums</span></li>
                    <li><span onclick="showPage('rules')" style="cursor: pointer;">Rules</span></li>
                    <li><span onclick="showPage('faq')" style="cursor: pointer;">FAQ</span></li>
                    <li><span onclick="openDashboard()" style="cursor: pointer;">Dashboard</span></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Community</h3>
                <ul>
                    <li><a href="https://discord.gg/4Nc7smkA" target="_blank">Discord Server</a></li>
                    <li><span onclick="openDashboard()" style="cursor: pointer;">Staff Applications</span></li>
                    <li><span onclick="openDashboard()" style="cursor: pointer;">Bug Reports</span></li>
                    <li><span onclick="openDashboard()" style="cursor: pointer;">Suggestions</span></li>
                    <li><span onclick="openDashboard()" style="cursor: pointer;">Support Tickets</span></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Connect With Us</h3>
                <div class="social-links">
                    <a href="#" class="social-link">📱</a>
                    <a href="#" class="social-link">🐦</a>
                    <a href="#" class="social-link">📺</a>
                    <a href="#" class="social-link">📷</a>
                </div>
                <p style="margin-top: 20px;">Server IP: connect 127.0.0.1:30120</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Ace of Spades Roleplay. All rights reserved. | Not affiliated with Rockstar Games.</p>
        </div>
    </footer>

    <!-- Include the JavaScript inline to ensure functions are available immediately -->
    <script>
        // Global variables for user state
        let currentUser = null;
        let userRoles = [];

        // Define all navigation functions immediately in global scope
        function showPage(pageId) {
            console.log('Showing page:', pageId);
            
            // Hide all pages
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => page.classList.add('hidden'));
            
            // Show selected page
            const targetPage = document.getElementById(pageId + '-page');
            if (targetPage) {
                targetPage.classList.remove('hidden');
                console.log('Successfully showed page:', pageId);
            } else {
                console.error('Page not found:', pageId + '-page');
            }
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        function openDashboard() {
            console.log('Opening dashboard, current user:', currentUser);
            if (!currentUser) {
                openModal('loginModal');
            } else {
                showPage('dashboard');
            }
        }

        function openModal(modalId) {
            console.log('Opening modal:', modalId);
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'block';
            } else {
                console.error('Modal not found:', modalId);
            }
        }

        function closeModal(modalId) {
            console.log('Closing modal:', modalId);
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'none';
            }
        }

        function switchModal(fromModal, toModal) {
            closeModal(fromModal);
            openModal(toModal);
        }

        function showDashboardTab(tabName) {
            console.log('Showing dashboard tab:', tabName);
            
            // Remove active class from all tabs
            document.querySelectorAll('.dashboard-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Add active class to clicked tab
            if (event && event.target) {
                event.target.classList.add('active');
            }
            
            // Hide all tab contents
            document.querySelectorAll('.dashboard-tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // Show selected tab content
            const tabContent = document.getElementById(tabName + '-tab');
            if (tabContent) {
                tabContent.classList.remove('hidden');
            }
            
            // Load content for specific tabs
            if (tabName === 'dashboard' && currentUser) {
                loadServerStats();
            }
        }

        function loginWithDiscord() {
            console.log('Redirecting to Discord OAuth');
            window.location.href = '/auth/discord';
        }

        function linkDiscord() {
            console.log('Linking Discord account');
            window.location.href = '/auth/discord';
        }

        async function unlinkDiscord() {
            if (!confirm('Are you sure you want to unlink your Discord account? You may lose some permissions.')) {
                return;
            }
            
            try {
                const response = await fetch('/api/account/unlink-discord', {
                    method: 'POST'
                });
                
                if (response.ok) {
                    showAlert('Discord account unlinked successfully', 'success');
                    await loadUserSession(); // Refresh user data
                } else {
                    const data = await response.json();
                    showAlert(data.error || 'Failed to unlink Discord', 'error');
                }
            } catch (error) {
                showAlert('Network error occurred', 'error');
            }
        }

        async function logout() {
            console.log('Logging out');
            try {
                const response = await fetch('/api/logout', {
                    method: 'POST'
                });
                
                if (response.ok) {
                    currentUser = null;
                    userRoles = [];
                    
                    // Update UI
                    document.getElementById('authLinks').classList.remove('hidden');
                    document.getElementById('userInfo').classList.add('hidden');
                    document.getElementById('mainAuthLinks').classList.remove('hidden');
                    document.getElementById('mainUserInfo').classList.add('hidden');
                    
                    showAlert('Logged out successfully', 'success');
                    showPage('home');
                } else {
                    showAlert('Logout failed', 'error');
                }
            } catch (error) {
                showAlert('Network error occurred', 'error');
            }
        }

        // Utility functions
        function showAlert(message, type = 'info') {
            // Create alert element
            const alert = document.createElement('div');
            alert.className = `auth-alert ${type}`;
            alert.innerHTML = `
                <span>${message}</span>
                <button onclick="this.parentElement.remove()">&times;</button>
            `;
            
            // Add styles
            alert.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: ${type === 'success' ? '#4caf50' : type === 'error' ? '#f44336' : '#2196f3'};
                color: white;
                padding: 15px 20px;
                border-radius: 5px;
                z-index: 2001;
                display: flex;
                align-items: center;
                gap: 10px;
                max-width: 400px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            `;
            
            document.body.appendChild(alert);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                if (alert.parentElement) {
                    alert.remove();
                }
            }, 5000);
        }

        function hasPermission(permission) {
            return userRoles.includes(permission);
        }

        // Authentication functions
        async function handleEmailLogin(e) {
            e.preventDefault();
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                showAlert('Please fill in all fields', 'error');
                return;
            }
            
            try {
                const response = await fetch('/api/auth/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    showAlert('Login successful!', 'success');
                    closeModal('loginModal');
                    await loadUserSession();
                    showPage('dashboard');
                } else {
                    showAlert(data.error || 'Login failed', 'error');
                }
            } catch (error) {
                showAlert('Network error occurred', 'error');
            }
        }

        async function handleEmailRegister(e) {
            e.preventDefault();
            
            const email = document.getElementById('registerEmail').value;
            const username = document.getElementById('registerUsername').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;
            
            if (!email || !username || !password || !confirmPassword) {
                showAlert('Please fill in all fields', 'error');
                return;
            }
            
            if (password !== confirmPassword) {
                showAlert('Passwords do not match', 'error');
                return;
            }
            
            if (password.length < 6) {
                showAlert('Password must be at least 6 characters', 'error');
                return;
            }
            
            try {
                const response = await fetch('/api/auth/register', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, username, password })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    showAlert('Account created successfully! Please log in.', 'success');
                    switchModal('registerModal', 'loginModal');
                    // Pre-fill login form
                    document.getElementById('loginEmail').value = email;
                } else {
                    showAlert(data.error || 'Registration failed', 'error');
                }
            } catch (error) {
                showAlert('Network error occurred', 'error');
            }
        }

        async function loadUserSession() {
            try {
                const response = await fetch('/api/user');
                if (response.ok) {
                    const user = await response.json();
                    setCurrentUser(user);
                }
            } catch (error) {
                console.log('No active session');
            }
        }

        function setCurrentUser(user) {
            currentUser = user;
            userRoles = user.roles || [];
            
            // Update UI
            document.getElementById('authLinks').classList.add('hidden');
            document.getElementById('userInfo').classList.remove('hidden');
            document.getElementById('welcomeMessage').textContent = `Welcome, ${user.username}!`;
            
            document.getElementById('mainAuthLinks').classList.add('hidden');
            document.getElementById('mainUserInfo').classList.remove('hidden');
            document.getElementById('mainWelcomeMessage').textContent = `Welcome, ${user.username}!`;
            
            // Set avatar
            const avatars = document.querySelectorAll('#userAvatar, #mainUserAvatar');
            avatars.forEach(avatar => {
                avatar.src = user.avatar || '/images/default-avatar.png';
            });
            
            updateTabVisibility();
            updateDashboardContent();
        }

        function updateTabVisibility() {
            if (!currentUser) return;
            
            const staffTab = document.getElementById('staffTab');
            const kcsoTab = document.getElementById('kcsoTab');
            const mspTab = document.getElementById('mspTab');
            const mfdTab = document.getElementById('mfdTab');
            const settingsTab = document.getElementById('settingsTab');

            // Hide all restricted tabs by default
            [staffTab, kcsoTab, mspTab, mfdTab, settingsTab].forEach(tab => {
                if (tab) tab.style.display = 'none';
            });

            // Show tabs based on roles
            if (hasPermission('Staff')) {
                if (staffTab) staffTab.style.display = 'block';
            }

            if (hasPermission('KCSO Member') || hasPermission('Admin') || hasPermission('Server Director')) {
                if (kcsoTab) kcsoTab.style.display = 'block';
            }

            if (hasPermission('MSP Member') || hasPermission('Admin') || hasPermission('Server Director')) {
                if (mspTab) mspTab.style.display = 'block';
            }

            if (hasPermission('MFD Member') || hasPermission('Admin') || hasPermission('Server Director')) {
                if (mfdTab) mfdTab.style.display = 'block';
            }

            if (hasPermission('Admin') || hasPermission('Server Director')) {
                if (settingsTab) settingsTab.style.display = 'block';
            }
        }

        async function updateDashboardContent() {
            if (!currentUser) return;
            
            // Update account info
            document.getElementById('profileUsername').textContent = currentUser.username || '-';
            document.getElementById('profileEmail').textContent = currentUser.email || 'Discord Only';
            document.getElementById('profileRoles').textContent = userRoles.join(', ') || 'User';
            document.getElementById('profileLastLogin').textContent = currentUser.lastLogin 
                ? new Date(currentUser.lastLogin).toLocaleString() 
                : 'Never';
            
            // Update Discord status
            if (currentUser.discordId) {
                document.getElementById('discordStatusText').textContent = 'Connected';
                document.getElementById('discordStatusText').style.color = '#4caf50';
                document.getElementById('discordUsername').textContent = currentUser.discordUsername || 'Unknown';
                document.getElementById('discordActionBtn').textContent = 'Unlink Discord';
                document.getElementById('discordActionBtn').className = 'action-btn ban-btn';
                document.getElementById('discordActionBtn').onclick = unlinkDiscord;
            } else {
                document.getElementById('discordStatusText').textContent = 'Not Connected';
                document.getElementById('discordStatusText').style.color = '#f44336';
                document.getElementById('discordUsername').textContent = '-';
                document.getElementById('discordActionBtn').textContent = 'Link Discord';
                document.getElementById('discordActionBtn').className = 'action-btn link-btn';
                document.getElementById('discordActionBtn').onclick = linkDiscord;
            }
            
            // Load server stats
            await loadServerStats();
        }

        async function loadServerStats() {
            try {
                const response = await fetch('/api/stats');
                if (response.ok) {
                    const stats = await response.json();
                    
                    document.getElementById('stat-total-playtime').textContent = stats.totalUsers || '0';
                    document.getElementById('stat-total-deaths').textContent = stats.discordLinked || '0';
                    document.getElementById('stat-total-arrests').textContent = stats.staffCount || '0';
                }
            } catch (error) {
                console.error('Failed to load server stats:', error);
            }
        }

        function handleAuthCallback(status, message) {
            let alertMessage = '';
            let alertType = 'info';
            
            switch(status) {
                case 'success':
                    alertMessage = 'Successfully logged in with Discord!';
                    alertType = 'success';
                    break;
                case 'linked':
                    alertMessage = 'Discord account linked successfully!';
                    alertType = 'success';
                    break;
                case 'error':
                    alertMessage = `Authentication failed: ${message || 'Unknown error'}`;
                    alertType = 'error';
                    break;
            }
            
            if (alertMessage) {
                showAlert(alertMessage, alertType);
            }
        }

        // Initialize app when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, initializing app...');
            
            // Check URL parameters for auth status
            const urlParams = new URLSearchParams(window.location.search);
            const authStatus = urlParams.get('auth');
            
            if (authStatus) {
                handleAuthCallback(authStatus, urlParams.get('message'));
                // Clean URL
                window.history.replaceState({}, document.title, window.location.pathname);
            }
            
            // Load user session if exists
            loadUserSession();
            
            // Show home page by default
            showPage('home');
            
            // Setup event listeners
            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                loginForm.addEventListener('submit', handleEmailLogin);
            }
            
            const registerForm = document.getElementById('registerForm');
            if (registerForm) {
                registerForm.addEventListener('submit', handleEmailRegister);
            }
            
            // Close modals when clicking outside
            window.onclick = function(event) {
                const modals = document.querySelectorAll('.auth-modal');
                modals.forEach(modal => {
                    if (event.target === modal) {
                        modal.style.display = 'none';
                    }
                });
            }
            
            console.log('App initialized successfully');
        });

        // Add parallax effect to banner
        window.addEventListener('scroll', () => {
            const scrolled = window.pageYOffset;
            const banner = document.querySelector('.banner');
            if (banner) {
                banner.style.transform = `translateY(${scrolled * 0.5}px)`;
            }
        });

        // Test function to verify everything is working
        function testNavigation() {
            console.log('Testing navigation functions...');
            console.log('showPage function:', typeof showPage);
            console.log('openDashboard function:', typeof openDashboard);
            console.log('openModal function:', typeof openModal);
            
            // Test showing different pages
            setTimeout(() => showPage('forums'), 1000);
            setTimeout(() => showPage('rules'), 2000);
            setTimeout(() => showPage('home'), 3000);
        }

        // Call test function after page loads (remove this in production)
        // setTimeout(testNavigation, 500);
    </script>

    <script>
        // In your existing dashboard JavaScript
        if (hasPermission('Staff') || hasPermission('Admin')) {
            // Add a "Advanced Staff Tools" button that opens staff.html
            const staffButton = `
                <a href="/staff.html" target="_blank" class="action-btn link-btn">
                    🛠️ Advanced Staff Tools
                </a>
            `;
            // Add this button to your staff tab
        }
    </script>










    <script type="text/babel">
        (function() {
            console.log('Initializing Simple Staff Component...');
            
            // Wait for React to be available
            function waitForReact() {
                if (typeof React !== 'undefined' && typeof ReactDOM !== 'undefined') {
                    console.log('React is available, setting up staff component');
                    initializeStaffComponent();
                } else {
                    console.log('Waiting for React...');
                    setTimeout(waitForReact, 100);
                }
            }

            function initializeStaffComponent() {
                // Simple Staff Component with no external dependencies
                const StaffComponent = () => {
                    const [activeSection, setActiveSection] = React.useState('dashboard');
                    const [playerInput, setPlayerInput] = React.useState('');
                    const [reasonInput, setReasonInput] = React.useState('');
                    
                    return React.createElement('div', {
                        style: {
                            minHeight: '500px',
                            background: 'linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)',
                            color: 'white',
                            padding: '30px',
                            borderRadius: '12px',
                            fontFamily: 'Arial, sans-serif'
                        }
                    }, [
                        // Header
                        React.createElement('div', {
                            key: 'header',
                            style: {
                                textAlign: 'center',
                                marginBottom: '30px',
                                borderBottom: '2px solid #a61000',
                                paddingBottom: '20px'
                            }
                        }, [
                            React.createElement('h1', {
                                key: 'title',
                                style: { 
                                    color: '#a61000', 
                                    marginBottom: '10px',
                                    fontSize: '2.5rem',
                                    fontWeight: 'bold',
                                    textShadow: '2px 2px 4px rgba(0,0,0,0.5)'
                                }
                            }, '🛡️ Staff Management Dashboard'),
                            React.createElement('p', {
                                key: 'subtitle',
                                style: { color: '#cccccc', fontSize: '1.1rem' }
                            }, 'Manage players and monitor server activity')
                        ]),
                        
                        // Navigation
                        React.createElement('div', {
                            key: 'nav',
                            style: { 
                                marginBottom: '30px',
                                display: 'flex',
                                justifyContent: 'center',
                                gap: '15px'
                            }
                        }, [
                            React.createElement('button', {
                                key: 'dash-btn',
                                onClick: () => setActiveSection('dashboard'),
                                style: {
                                    background: activeSection === 'dashboard' ? '#a61000' : '#333',
                                    color: 'white',
                                    border: 'none',
                                    padding: '12px 24px',
                                    borderRadius: '6px',
                                    cursor: 'pointer',
                                    fontSize: '16px',
                                    fontWeight: 'bold',
                                    transition: 'all 0.3s ease',
                                    boxShadow: activeSection === 'dashboard' ? '0 4px 15px rgba(166, 16, 0, 0.4)' : 'none'
                                }
                            }, '📊 Dashboard'),
                            React.createElement('button', {
                                key: 'mod-btn',
                                onClick: () => setActiveSection('moderation'),
                                style: {
                                    background: activeSection === 'moderation' ? '#a61000' : '#333',
                                    color: 'white',
                                    border: 'none',
                                    padding: '12px 24px',
                                    borderRadius: '6px',
                                    cursor: 'pointer',
                                    fontSize: '16px',
                                    fontWeight: 'bold',
                                    transition: 'all 0.3s ease',
                                    boxShadow: activeSection === 'moderation' ? '0 4px 15px rgba(166, 16, 0, 0.4)' : 'none'
                                }
                            }, '⚖️ Moderation'),
                            React.createElement('button', {
                                key: 'players-btn',
                                onClick: () => setActiveSection('players'),
                                style: {
                                    background: activeSection === 'players' ? '#a61000' : '#333',
                                    color: 'white',
                                    border: 'none',
                                    padding: '12px 24px',
                                    borderRadius: '6px',
                                    cursor: 'pointer',
                                    fontSize: '16px',
                                    fontWeight: 'bold',
                                    transition: 'all 0.3s ease',
                                    boxShadow: activeSection === 'players' ? '0 4px 15px rgba(166, 16, 0, 0.4)' : 'none'
                                }
                            }, '👥 Players')
                        ]),
                        
                        // Dashboard Section
                        activeSection === 'dashboard' ? React.createElement('div', {
                            key: 'dashboard-content'
                        }, [
                            React.createElement('h2', {
                                key: 'stats-title',
                                style: { 
                                    color: '#a61000',
                                    marginBottom: '20px',
                                    fontSize: '1.8rem'
                                }
                            }, '📈 Server Statistics'),
                            React.createElement('div', {
                                key: 'stats-grid',
                                style: {
                                    display: 'grid',
                                    gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',
                                    gap: '20px',
                                    marginBottom: '30px'
                                }
                            }, [
                                // Active Players
                                React.createElement('div', {
                                    key: 'stat-1',
                                    style: {
                                        background: 'linear-gradient(135deg, #333 0%, #444 100%)',
                                        padding: '20px',
                                        borderRadius: '10px',
                                        textAlign: 'center',
                                        border: '1px solid #555',
                                        boxShadow: '0 4px 15px rgba(0,0,0,0.3)'
                                    }
                                }, [
                                    React.createElement('div', {
                                        key: 'icon',
                                        style: { fontSize: '2rem', marginBottom: '10px' }
                                    }, '🟢'),
                                    React.createElement('div', {
                                        key: 'value',
                                        style: { fontSize: '2.5rem', fontWeight: 'bold', color: '#4CAF50' }
                                    }, '156'),
                                    React.createElement('div', {
                                        key: 'label',
                                        style: { color: '#cccccc', fontSize: '1.1rem' }
                                    }, 'Active Players')
                                ]),
                                // Total Bans
                                React.createElement('div', {
                                    key: 'stat-2',
                                    style: {
                                        background: 'linear-gradient(135deg, #333 0%, #444 100%)',
                                        padding: '20px',
                                        borderRadius: '10px',
                                        textAlign: 'center',
                                        border: '1px solid #555',
                                        boxShadow: '0 4px 15px rgba(0,0,0,0.3)'
                                    }
                                }, [
                                    React.createElement('div', {
                                        key: 'icon',
                                        style: { fontSize: '2rem', marginBottom: '10px' }
                                    }, '🚫'),
                                    React.createElement('div', {
                                        key: 'value',
                                        style: { fontSize: '2.5rem', fontWeight: 'bold', color: '#f44336' }
                                    }, '1,247'),
                                    React.createElement('div', {
                                        key: 'label',
                                        style: { color: '#cccccc', fontSize: '1.1rem' }
                                    }, 'Total Bans')
                                ]),
                                // Total Kicks
                                React.createElement('div', {
                                    key: 'stat-3',
                                    style: {
                                        background: 'linear-gradient(135deg, #333 0%, #444 100%)',
                                        padding: '20px',
                                        borderRadius: '10px',
                                        textAlign: 'center',
                                        border: '1px solid #555',
                                        boxShadow: '0 4px 15px rgba(0,0,0,0.3)'
                                    }
                                }, [
                                    React.createElement('div', {
                                        key: 'icon',
                                        style: { fontSize: '2rem', marginBottom: '10px' }
                                    }, '👢'),
                                    React.createElement('div', {
                                        key: 'value',
                                        style: { fontSize: '2.5rem', fontWeight: 'bold', color: '#ff9800' }
                                    }, '3,891'),
                                    React.createElement('div', {
                                        key: 'label',
                                        style: { color: '#cccccc', fontSize: '1.1rem' }
                                    }, 'Total Kicks')
                                ]),
                                // Total Warns
                                React.createElement('div', {
                                    key: 'stat-4',
                                    style: {
                                        background: 'linear-gradient(135deg, #333 0%, #444 100%)',
                                        padding: '20px',
                                        borderRadius: '10px',
                                        textAlign: 'center',
                                        border: '1px solid #555',
                                        boxShadow: '0 4px 15px rgba(0,0,0,0.3)'
                                    }
                                }, [
                                    React.createElement('div', {
                                        key: 'icon',
                                        style: { fontSize: '2rem', marginBottom: '10px' }
                                    }, '⚠️'),
                                    React.createElement('div', {
                                        key: 'value',
                                        style: { fontSize: '2.5rem', fontWeight: 'bold', color: '#ffeb3b' }
                                    }, '5,634'),
                                    React.createElement('div', {
                                        key: 'label',
                                        style: { color: '#cccccc', fontSize: '1.1rem' }
                                    }, 'Total Warns')
                                ])
                            ]),
                            // Recent Activity
                            React.createElement('div', {
                                key: 'recent-activity',
                                style: {
                                    background: '#333',
                                    padding: '20px',
                                    borderRadius: '10px',
                                    border: '1px solid #555'
                                }
                            }, [
                                React.createElement('h3', {
                                    key: 'activity-title',
                                    style: { color: '#a61000', marginBottom: '15px' }
                                }, '🔔 Recent Activity'),
                                React.createElement('div', {
                                    key: 'activity-item-1',
                                    style: { 
                                        padding: '10px',
                                        background: '#444',
                                        marginBottom: '10px',
                                        borderRadius: '5px',
                                        borderLeft: '4px solid #f44336'
                                    }
                                }, '🚫 PlayerXYZ banned by AdminUser for cheating (7 days) - 2 hours ago'),
                                React.createElement('div', {
                                    key: 'activity-item-2',
                                    style: { 
                                        padding: '10px',
                                        background: '#444',
                                        marginBottom: '10px',
                                        borderRadius: '5px',
                                        borderLeft: '4px solid #ff9800'
                                    }
                                }, '👢 ToxicPlayer kicked by ModeratorAlex for mic spam - 1 hour ago'),
                                React.createElement('div', {
                                    key: 'activity-item-3',
                                    style: { 
                                        padding: '10px',
                                        background: '#444',
                                        borderRadius: '5px',
                                        borderLeft: '4px solid #ffeb3b'
                                    }
                                }, '⚠️ NewPlayer warned by StaffMember for VDM - 30 minutes ago')
                            ])
                        ]) : null,
                        
                        // Moderation Section
                        activeSection === 'moderation' ? React.createElement('div', {
                            key: 'moderation-content'
                        }, [
                            React.createElement('h2', {
                                key: 'mod-title',
                                style: { 
                                    color: '#a61000',
                                    marginBottom: '20px',
                                    fontSize: '1.8rem'
                                }
                            }, '⚖️ Player Moderation'),
                            React.createElement('div', {
                                key: 'mod-form',
                                style: { 
                                    background: '#333',
                                    padding: '25px',
                                    borderRadius: '10px',
                                    border: '1px solid #555',
                                    marginBottom: '20px'
                                }
                            }, [
                                React.createElement('div', {
                                    key: 'form-group-1',
                                    style: { marginBottom: '20px' }
                                }, [
                                    React.createElement('label', {
                                        key: 'player-label',
                                        style: { 
                                            display: 'block',
                                            marginBottom: '8px',
                                            color: '#a61000',
                                            fontWeight: 'bold'
                                        }
                                    }, 'Player ID or Username:'),
                                    React.createElement('input', {
                                        key: 'player-input',
                                        type: 'text',
                                        value: playerInput,
                                        onChange: (e) => setPlayerInput(e.target.value),
                                        placeholder: 'Enter Player ID or Username',
                                        style: {
                                            width: '100%',
                                            padding: '12px',
                                            background: '#444',
                                            border: '2px solid #555',
                                            borderRadius: '6px',
                                            color: 'white',
                                            fontSize: '16px',
                                            outline: 'none',
                                            transition: 'border-color 0.3s ease'
                                        }
                                    })
                                ]),
                                React.createElement('div', {
                                    key: 'form-group-2',
                                    style: { marginBottom: '20px' }
                                }, [
                                    React.createElement('label', {
                                        key: 'reason-label',
                                        style: { 
                                            display: 'block',
                                            marginBottom: '8px',
                                            color: '#a61000',
                                            fontWeight: 'bold'
                                        }
                                    }, 'Reason:'),
                                    React.createElement('textarea', {
                                        key: 'reason-input',
                                        value: reasonInput,
                                        onChange: (e) => setReasonInput(e.target.value),
                                        placeholder: 'Enter reason for moderation action...',
                                        style: {
                                            width: '100%',
                                            padding: '12px',
                                            background: '#444',
                                            border: '2px solid #555',
                                            borderRadius: '6px',
                                            color: 'white',
                                            fontSize: '16px',
                                            minHeight: '100px',
                                            resize: 'vertical',
                                            outline: 'none',
                                            transition: 'border-color 0.3s ease'
                                        }
                                    })
                                ]),
                                React.createElement('div', {
                                    key: 'action-buttons',
                                    style: { 
                                        display: 'grid',
                                        gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))',
                                        gap: '15px'
                                    }
                                }, [
                                    React.createElement('button', {
                                        key: 'ban-btn',
                                        onClick: () => alert(`Ban action for: ${playerInput}\nReason: ${reasonInput}`),
                                        style: {
                                            background: 'linear-gradient(135deg, #dc3545 0%, #c82333 100%)',
                                            color: 'white',
                                            border: 'none',
                                            padding: '12px 20px',
                                            borderRadius: '6px',
                                            cursor: 'pointer',
                                            fontSize: '16px',
                                            fontWeight: 'bold',
                                            transition: 'transform 0.2s ease',
                                            boxShadow: '0 4px 15px rgba(220, 53, 69, 0.3)'
                                        }
                                    }, '🚫 Ban Player'),
                                    React.createElement('button', {
                                        key: 'kick-btn',
                                        onClick: () => alert(`Kick action for: ${playerInput}\nReason: ${reasonInput}`),
                                        style: {
                                            background: 'linear-gradient(135deg, #fd7e14 0%, #e8680e 100%)',
                                            color: 'white',
                                            border: 'none',
                                            padding: '12px 20px',
                                            borderRadius: '6px',
                                            cursor: 'pointer',
                                            fontSize: '16px',
                                            fontWeight: 'bold',
                                            transition: 'transform 0.2s ease',
                                            boxShadow: '0 4px 15px rgba(253, 126, 20, 0.3)'
                                        }
                                    }, '👢 Kick Player'),
                                    React.createElement('button', {
                                        key: 'warn-btn',
                                        onClick: () => alert(`Warn action for: ${playerInput}\nReason: ${reasonInput}`),
                                        style: {
                                            background: 'linear-gradient(135deg, #ffc107 0%, #e0a800 100%)',
                                            color: 'black',
                                            border: 'none',
                                            padding: '12px 20px',
                                            borderRadius: '6px',
                                            cursor: 'pointer',
                                            fontSize: '16px',
                                            fontWeight: 'bold',
                                            transition: 'transform 0.2s ease',
                                            boxShadow: '0 4px 15px rgba(255, 193, 7, 0.3)'
                                        }
                                    }, '⚠️ Warn Player')
                                ])
                            ])
                        ]) : null,
                        
                        // Players Section
                        activeSection === 'players' ? React.createElement('div', {
                            key: 'players-content'
                        }, [
                            React.createElement('h2', {
                                key: 'players-title',
                                style: { 
                                    color: '#a61000',
                                    marginBottom: '20px',
                                    fontSize: '1.8rem'
                                }
                            }, '👥 Online Players'),
                            React.createElement('div', {
                                key: 'players-list',
                                style: {
                                    background: '#333',
                                    padding: '20px',
                                    borderRadius: '10px',
                                    border: '1px solid #555'
                                }
                            }, [
                                React.createElement('div', {
                                    key: 'player-header',
                                    style: {
                                        display: 'grid',
                                        gridTemplateColumns: '2fr 1fr 1fr 1fr',
                                        gap: '15px',
                                        padding: '10px',
                                        background: '#444',
                                        borderRadius: '5px',
                                        marginBottom: '15px',
                                        fontWeight: 'bold',
                                        color: '#a61000'
                                    }
                                }, [
                                    React.createElement('div', { key: 'h1' }, 'Player Name'),
                                    React.createElement('div', { key: 'h2' }, 'ID'),
                                    React.createElement('div', { key: 'h3' }, 'Time Online'),
                                    React.createElement('div', { key: 'h4' }, 'Status')
                                ]),
                                // Sample players
                                ...[
                                    { name: 'VeteranPlayer92', id: '1001', time: '4h 23m', status: 'Active', statusColor: '#4CAF50' },
                                    { name: 'NewRolePlayer', id: '1002', time: '1h 45m', status: 'Active', statusColor: '#4CAF50' },
                                    { name: 'SuspiciousUser', id: '1003', time: '30m', status: 'Flagged', statusColor: '#ff9800' },
                                    { name: 'RegularPlayer', id: '1004', time: '2h 15m', status: 'Active', statusColor: '#4CAF50' }
                                ].map((player, index) => 
                                    React.createElement('div', {
                                        key: `player-${index}`,
                                        style: {
                                            display: 'grid',
                                            gridTemplateColumns: '2fr 1fr 1fr 1fr',
                                            gap: '15px',
                                            padding: '10px',
                                            background: '#444',
                                            borderRadius: '5px',
                                            marginBottom: '10px',
                                            borderLeft: `4px solid ${player.statusColor}`
                                        }
                                    }, [
                                        React.createElement('div', { key: 'name' }, player.name),
                                        React.createElement('div', { key: 'id' }, player.id),
                                        React.createElement('div', { key: 'time' }, player.time),
                                        React.createElement('span', { 
                                            key: 'status',
                                            style: { 
                                                color: player.statusColor,
                                                fontWeight: 'bold'
                                            }
                                        }, player.status)
                                    ])
                                )
                            ])
                        ]) : null
                    ]);
                };

                // Create the render function
                window.renderStaffComponent = function() {
                    console.log('renderStaffComponent called');
                    
                    // Try to find the staff container
                    let staffContainer = document.querySelector('#staff-content #root');
                    if (!staffContainer) {
                        staffContainer = document.getElementById('staff-content');
                    }
                    if (!staffContainer) {
                        staffContainer = document.getElementById('staff-react-root');
                    }
                    
                    if (!staffContainer) {
                        console.error('No staff container found! Creating fallback...');
                        // Create a fallback container
                        const staffTab = document.getElementById('staff-tab');
                        if (staffTab) {
                            staffContainer = document.createElement('div');
                            staffContainer.id = 'staff-fallback-root';
                            staffTab.appendChild(staffContainer);
                        } else {
                            console.error('Cannot find staff tab either!');
                            return;
                        }
                    }

                    console.log('Staff container found:', staffContainer);
                    console.log('Rendering staff component...');
                    
                    try {
                        ReactDOM.render(React.createElement(StaffComponent), staffContainer);
                        console.log('✅ Staff component rendered successfully!');
                    } catch (error) {
                        console.error('❌ Error rendering staff component:', error);
                        // Fallback: show error message
                        staffContainer.innerHTML = `
                            <div style="color: white; padding: 20px; background: #333; border-radius: 8px;">
                                <h2 style="color: #a61000;">⚠️ Staff Component Error</h2>
                                <p>There was an error loading the staff component. Please check the console for details.</p>
                                <pre style="background: #222; padding: 10px; border-radius: 4px; overflow: auto;">${error.message}</pre>
                            </div>
                        `;
                    }
                };

                // Make staff tab visible and override showDashboardTab
                const staffTab = document.getElementById('staffTab');
                if (staffTab) {
                    staffTab.style.display = 'block';
                    console.log('Staff tab made visible');
                }

                // Override showDashboardTab to handle staff rendering
                const originalShowDashboardTab = window.showDashboardTab;
                window.showDashboardTab = function(tabName) {
                    console.log('showDashboardTab called with:', tabName);
                    
                    // Call original function if it exists
                    if (originalShowDashboardTab) {
                        originalShowDashboardTab.call(this, tabName);
                    } else {
                        // Manual implementation
                        document.querySelectorAll('.dashboard-tab').forEach(tab => {
                            tab.classList.remove('active');
                        });
                        
                        if (event && event.target) {
                            event.target.classList.add('active');
                        }
                        
                        document.querySelectorAll('.dashboard-tab-content').forEach(content => {
                            content.classList.add('hidden');
                        });
                        
                        const tabContent = document.getElementById(tabName + '-tab');
                        if (tabContent) {
                            tabContent.classList.remove('hidden');
                        }
                    }
                    
                    // If staff tab is shown, render the React component
                    if (tabName === 'staff') {
                        console.log('Staff tab selected, rendering component...');
                        setTimeout(() => {
                            window.renderStaffComponent();
                        }, 100);
                    }
                };

                console.log('✅ Staff component integration initialized successfully');
            }

            // Start the initialization
            waitForReact();
        })();
        </script>


















    <script>
        // Complete Department Pages Script
        // Add this script to your HTML file to replace the existing department functionality

        (function() {
            // Wait for React and other dependencies
            function initializeDepartmentPages() {
                if (typeof React === 'undefined' || typeof ReactDOM === 'undefined') {
                    setTimeout(initializeDepartmentPages, 100);
                    return;
                }

                const { useState, useEffect } = React;

                // Mock data for departments
                const initialDepartmentData = {
                    KCSO: {
                        name: 'Koochiching County Sheriff\'s Office',
                        banner: {
                            title: 'Koochiching County Sheriff\'s Office',
                            subtitle: 'Serving and Protecting King County',
                            image: 'https://images.unsplash.com/photo-1556075798-4825dfaaf498?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80'
                        },
                        chainOfCommand: [
                            {
                                id: 1,
                                name: 'John Smith',
                                rank: 'Sheriff',
                                image: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face',
                                description: 'Leading the KCSO with 25+ years of experience in law enforcement.'
                            },
                            {
                                id: 2,
                                name: 'Sarah Johnson',
                                rank: 'Undersheriff',
                                image: 'https://images.unsplash.com/photo-1494790108755-2616b056d4a7?w=150&h=150&fit=crop&crop=face',
                                description: 'Second in command, overseeing daily operations and strategic planning.'
                            },
                            {
                                id: 3,
                                name: 'Mike Wilson',
                                rank: 'Chief Deputy',
                                image: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face',
                                description: 'Managing patrol divisions and supervising field operations.'
                            }
                        ],
                        subdivisions: [
                            {
                                id: 1,
                                name: 'Patrol Division',
                                description: 'Primary response unit for emergency calls and routine patrol',
                                applicationLink: '#',
                                status: 'Open'
                            },
                            {
                                id: 2,
                                name: 'Detective Division',
                                description: 'Investigating serious crimes and conducting follow-up investigations',
                                applicationLink: '#',
                                status: 'Closed'
                            },
                            {
                                id: 3,
                                name: 'Traffic Unit',
                                description: 'Traffic enforcement and accident investigation',
                                applicationLink: '#',
                                status: 'Open'
                            },
                            {
                                id: 4,
                                name: 'K-9 Unit',
                                description: 'Specialized canine operations for drug detection and tracking',
                                applicationLink: '#',
                                status: 'Limited'
                            }
                        ],
                        stats: {
                            totalMembers: 45,
                            arrests: 1247,
                            citations: 3891,
                            activeCases: 156,
                            responseTime: '4.2 min'
                        },
                        documents: [
                            {
                                id: 1,
                                name: 'Standard Operating Procedures',
                                purpose: 'Detailed procedures for all KCSO operations',
                                link: 'https://example.com/sop',
                                category: 'Operations',
                                lastUpdated: '2025-01-10'
                            },
                            {
                                id: 2,
                                name: 'Training Manual',
                                purpose: 'Comprehensive training guide for new recruits',
                                link: 'https://example.com/training',
                                category: 'Training',
                                lastUpdated: '2025-01-05'
                            },
                            {
                                id: 3,
                                name: 'Code of Conduct',
                                purpose: 'Ethical guidelines and behavioral expectations',
                                link: 'https://example.com/conduct',
                                category: 'Policy',
                                lastUpdated: '2024-12-20'
                            }
                        ]
                    },
                    MSP: {
                        name: 'Maryland State Police',
                        banner: {
                            title: 'Maryland State Police',
                            subtitle: 'Excellence, Integrity, Service',
                            image: 'https://images.unsplash.com/photo-1586829135343-132950070391?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80'
                        },
                        chainOfCommand: [
                            {
                                id: 1,
                                name: 'Robert Davis',
                                rank: 'Colonel',
                                image: 'https://images.unsplash.com/photo-1560250097-0b93528c311a?w=150&h=150&fit=crop&crop=face',
                                description: 'State Police Commander with expertise in highway patrol and investigations.'
                            },
                            {
                                id: 2,
                                name: 'Jennifer White',
                                rank: 'Lieutenant Colonel',
                                image: 'https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop&crop=face',
                                description: 'Deputy commander overseeing statewide operations and coordination.'
                            }
                        ],
                        subdivisions: [
                            {
                                id: 1,
                                name: 'Highway Patrol',
                                description: 'State highway enforcement and traffic safety',
                                applicationLink: '#',
                                status: 'Open'
                            },
                            {
                                id: 2,
                                name: 'Criminal Investigation Division',
                                description: 'Major crimes investigation and forensics',
                                applicationLink: '#',
                                status: 'Open'
                            }
                        ],
                        stats: {
                            totalMembers: 32,
                            arrests: 892,
                            citations: 2156,
                            activeCases: 89,
                            responseTime: '6.8 min'
                        },
                        documents: [
                            {
                                id: 1,
                                name: 'Highway Patrol Manual',
                                purpose: 'Procedures for highway enforcement and safety',
                                link: 'https://example.com/highway',
                                category: 'Operations',
                                lastUpdated: '2025-01-08'
                            }
                        ]
                    },
                    MFD: {
                        name: 'Montgomery Fire Department',
                        banner: {
                            title: 'Montgomery Fire Department',
                            subtitle: 'Courage, Honor, Dedication',
                            image: 'https://images.unsplash.com/photo-1540553016722-983e48a2cd10?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80'
                        },
                        chainOfCommand: [
                            {
                                id: 1,
                                name: 'Thomas Anderson',
                                rank: 'Fire Chief',
                                image: 'https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=150&h=150&fit=crop&crop=face',
                                description: 'Leading MFD with 20+ years in fire service and emergency management.'
                            },
                            {
                                id: 2,
                                name: 'Maria Rodriguez',
                                rank: 'Assistant Chief',
                                image: 'https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=150&h=150&fit=crop&crop=face',
                                description: 'Assistant Chief managing EMS operations and training programs.'
                            }
                        ],
                        subdivisions: [
                            {
                                id: 1,
                                name: 'Fire Suppression',
                                description: 'Primary firefighting and rescue operations',
                                applicationLink: '#',
                                status: 'Open'
                            },
                            {
                                id: 2,
                                name: 'Emergency Medical Services',
                                description: 'Advanced life support and emergency medical care',
                                applicationLink: '#',
                                status: 'Open'
                            }
                        ],
                        stats: {
                            totalMembers: 28,
                            emergencyCalls: 1456,
                            fires: 234,
                            medicalCalls: 1222,
                            responseTime: '3.8 min'
                        },
                        documents: [
                            {
                                id: 1,
                                name: 'Emergency Response Procedures',
                                purpose: 'Standard procedures for emergency response',
                                link: 'https://example.com/emergency',
                                category: 'Operations',
                                lastUpdated: '2025-01-12'
                            }
                        ]
                    }
                };

                // Check if user has command permissions for a department
                const hasCommandPermission = (department) => {
                    if (!window.currentUser || !window.userRoles) return false;
                    return window.userRoles.includes('Admin') || 
                        window.userRoles.includes('Server Director') ||
                        window.userRoles.includes(`${department} Command`);
                };

                // Department Component
                const DepartmentPage = ({ department }) => {
                    const [departmentData, setDepartmentData] = useState(initialDepartmentData[department]);
                    const [editMode, setEditMode] = useState(null);
                    const [showModal, setShowModal] = useState(null);
                    const [newItem, setNewItem] = useState({});

                    const canEdit = hasCommandPermission(department);

                    // Modal Component
                    const Modal = ({ type, onClose, onSave, data = {} }) => {
                        const [formData, setFormData] = useState(data);

                        const handleSubmit = (e) => {
                            e.preventDefault();
                            onSave(formData);
                            onClose();
                        };

                        const renderForm = () => {
                            switch (type) {
                                case 'command':
                                    return [
                                        React.createElement('input', {
                                            key: 'name',
                                            type: 'text',
                                            placeholder: 'Full Name',
                                            value: formData.name || '',
                                            onChange: (e) => setFormData({ ...formData, name: e.target.value }),
                                            style: { padding: '10px', margin: '10px 0', borderRadius: '5px', border: '1px solid #ccc', width: '100%' },
                                            required: true
                                        }),
                                        React.createElement('input', {
                                            key: 'rank',
                                            type: 'text',
                                            placeholder: 'Rank/Position',
                                            value: formData.rank || '',
                                            onChange: (e) => setFormData({ ...formData, rank: e.target.value }),
                                            style: { padding: '10px', margin: '10px 0', borderRadius: '5px', border: '1px solid #ccc', width: '100%' },
                                            required: true
                                        }),
                                        React.createElement('input', {
                                            key: 'image',
                                            type: 'url',
                                            placeholder: 'Image URL',
                                            value: formData.image || '',
                                            onChange: (e) => setFormData({ ...formData, image: e.target.value }),
                                            style: { padding: '10px', margin: '10px 0', borderRadius: '5px', border: '1px solid #ccc', width: '100%' }
                                        }),
                                        React.createElement('textarea', {
                                            key: 'description',
                                            placeholder: 'Description',
                                            value: formData.description || '',
                                            onChange: (e) => setFormData({ ...formData, description: e.target.value }),
                                            style: { padding: '10px', margin: '10px 0', borderRadius: '5px', border: '1px solid #ccc', width: '100%', height: '80px' },
                                            required: true
                                        })
                                    ];
                                case 'subdivision':
                                    return [
                                        React.createElement('input', {
                                            key: 'name',
                                            type: 'text',
                                            placeholder: 'Subdivision Name',
                                            value: formData.name || '',
                                            onChange: (e) => setFormData({ ...formData, name: e.target.value }),
                                            style: { padding: '10px', margin: '10px 0', borderRadius: '5px', border: '1px solid #ccc', width: '100%' },
                                            required: true
                                        }),
                                        React.createElement('textarea', {
                                            key: 'description',
                                            placeholder: 'Description',
                                            value: formData.description || '',
                                            onChange: (e) => setFormData({ ...formData, description: e.target.value }),
                                            style: { padding: '10px', margin: '10px 0', borderRadius: '5px', border: '1px solid #ccc', width: '100%', height: '80px' },
                                            required: true
                                        }),
                                        React.createElement('input', {
                                            key: 'applicationLink',
                                            type: 'url',
                                            placeholder: 'Application Link',
                                            value: formData.applicationLink || '',
                                            onChange: (e) => setFormData({ ...formData, applicationLink: e.target.value }),
                                            style: { padding: '10px', margin: '10px 0', borderRadius: '5px', border: '1px solid #ccc', width: '100%' }
                                        }),
                                        React.createElement('select', {
                                            key: 'status',
                                            value: formData.status || 'Open',
                                            onChange: (e) => setFormData({ ...formData, status: e.target.value }),
                                            style: { padding: '10px', margin: '10px 0', borderRadius: '5px', border: '1px solid #ccc', width: '100%' }
                                        }, [
                                            React.createElement('option', { key: 'open', value: 'Open' }, 'Open'),
                                            React.createElement('option', { key: 'closed', value: 'Closed' }, 'Closed'),
                                            React.createElement('option', { key: 'limited', value: 'Limited' }, 'Limited')
                                        ])
                                    ];
                                case 'document':
                                    return [
                                        React.createElement('input', {
                                            key: 'name',
                                            type: 'text',
                                            placeholder: 'Document Name',
                                            value: formData.name || '',
                                            onChange: (e) => setFormData({ ...formData, name: e.target.value }),
                                            style: { padding: '10px', margin: '10px 0', borderRadius: '5px', border: '1px solid #ccc', width: '100%' },
                                            required: true
                                        }),
                                        React.createElement('textarea', {
                                            key: 'purpose',
                                            placeholder: 'Purpose/Description',
                                            value: formData.purpose || '',
                                            onChange: (e) => setFormData({ ...formData, purpose: e.target.value }),
                                            style: { padding: '10px', margin: '10px 0', borderRadius: '5px', border: '1px solid #ccc', width: '100%', height: '80px' },
                                            required: true
                                        }),
                                        React.createElement('input', {
                                            key: 'link',
                                            type: 'url',
                                            placeholder: 'Document Link',
                                            value: formData.link || '',
                                            onChange: (e) => setFormData({ ...formData, link: e.target.value }),
                                            style: { padding: '10px', margin: '10px 0', borderRadius: '5px', border: '1px solid #ccc', width: '100%' },
                                            required: true
                                        }),
                                        React.createElement('select', {
                                            key: 'category',
                                            value: formData.category || 'Operations',
                                            onChange: (e) => setFormData({ ...formData, category: e.target.value }),
                                            style: { padding: '10px', margin: '10px 0', borderRadius: '5px', border: '1px solid #ccc', width: '100%' }
                                        }, [
                                            React.createElement('option', { key: 'operations', value: 'Operations' }, 'Operations'),
                                            React.createElement('option', { key: 'training', value: 'Training' }, 'Training'),
                                            React.createElement('option', { key: 'policy', value: 'Policy' }, 'Policy'),
                                            React.createElement('option', { key: 'procedures', value: 'Procedures' }, 'Procedures')
                                        ])
                                    ];
                                default:
                                    return [];
                            }
                        };

                        return React.createElement('div', {
                            style: {
                                position: 'fixed',
                                top: 0,
                                left: 0,
                                width: '100%',
                                height: '100%',
                                backgroundColor: 'rgba(0,0,0,0.8)',
                                display: 'flex',
                                justifyContent: 'center',
                                alignItems: 'center',
                                zIndex: 2000
                            }
                        }, [
                            React.createElement('div', {
                                key: 'modal',
                                style: {
                                    backgroundColor: '#1a1a1a',
                                    padding: '30px',
                                    borderRadius: '10px',
                                    border: '2px solid #a61000',
                                    maxWidth: '500px',
                                    width: '90%',
                                    color: 'white'
                                }
                            }, [
                                React.createElement('h3', {
                                    key: 'title',
                                    style: { color: '#a61000', marginBottom: '20px' }
                                }, `${data.id ? 'Edit' : 'Add'} ${type.charAt(0).toUpperCase() + type.slice(1)}`),
                                React.createElement('form', {
                                    key: 'form',
                                    onSubmit: handleSubmit
                                }, [
                                    ...renderForm(),
                                    React.createElement('div', {
                                        key: 'buttons',
                                        style: { display: 'flex', gap: '10px', marginTop: '20px' }
                                    }, [
                                        React.createElement('button', {
                                            key: 'save',
                                            type: 'submit',
                                            style: {
                                                padding: '10px 20px',
                                                backgroundColor: '#a61000',
                                                color: 'white',
                                                border: 'none',
                                                borderRadius: '5px',
                                                cursor: 'pointer'
                                            }
                                        }, 'Save'),
                                        React.createElement('button', {
                                            key: 'cancel',
                                            type: 'button',
                                            onClick: onClose,
                                            style: {
                                                padding: '10px 20px',
                                                backgroundColor: '#666',
                                                color: 'white',
                                                border: 'none',
                                                borderRadius: '5px',
                                                cursor: 'pointer'
                                            }
                                        }, 'Cancel')
                                    ])
                                ])
                            ])
                        ]);
                    };

                    // Save functions
                    const saveCommand = (data) => {
                        if (data.id) {
                            // Edit existing
                            setDepartmentData(prev => ({
                                ...prev,
                                chainOfCommand: prev.chainOfCommand.map(cmd => 
                                    cmd.id === data.id ? { ...data } : cmd
                                )
                            }));
                        } else {
                            // Add new
                            const newId = Math.max(...departmentData.chainOfCommand.map(c => c.id), 0) + 1;
                            setDepartmentData(prev => ({
                                ...prev,
                                chainOfCommand: [...prev.chainOfCommand, { ...data, id: newId }]
                            }));
                        }
                        if (window.showAlert) {
                            window.showAlert('Command member saved successfully!', 'success');
                        }
                    };

                    const saveSubdivision = (data) => {
                        if (data.id) {
                            setDepartmentData(prev => ({
                                ...prev,
                                subdivisions: prev.subdivisions.map(sub => 
                                    sub.id === data.id ? { ...data } : sub
                                )
                            }));
                        } else {
                            const newId = Math.max(...departmentData.subdivisions.map(s => s.id), 0) + 1;
                            setDepartmentData(prev => ({
                                ...prev,
                                subdivisions: [...prev.subdivisions, { ...data, id: newId }]
                            }));
                        }
                        if (window.showAlert) {
                            window.showAlert('Subdivision saved successfully!', 'success');
                        }
                    };

                    const saveDocument = (data) => {
                        if (data.id) {
                            setDepartmentData(prev => ({
                                ...prev,
                                documents: prev.documents.map(doc => 
                                    doc.id === data.id ? { ...data, lastUpdated: new Date().toISOString().split('T')[0] } : doc
                                )
                            }));
                        } else {
                            const newId = Math.max(...departmentData.documents.map(d => d.id), 0) + 1;
                            setDepartmentData(prev => ({
                                ...prev,
                                documents: [...prev.documents, { ...data, id: newId, lastUpdated: new Date().toISOString().split('T')[0] }]
                            }));
                        }
                        if (window.showAlert) {
                            window.showAlert('Document saved successfully!', 'success');
                        }
                    };

                    const deleteItem = (type, id) => {
                        if (!confirm('Are you sure you want to delete this item?')) return;
                        
                        setDepartmentData(prev => ({
                            ...prev,
                            [type]: prev[type].filter(item => item.id !== id)
                        }));
                        
                        if (window.showAlert) {
                            window.showAlert('Item deleted successfully!', 'success');
                        }
                    };

                    return React.createElement('div', {
                        style: {
                            background: '#000',
                            color: 'white',
                            minHeight: '100vh'
                        }
                    }, [
                        // Banner
                        React.createElement('div', {
                            key: 'banner',
                            style: {
                                height: '300px',
                                backgroundImage: `linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url(${departmentData.banner.image})`,
                                backgroundSize: 'cover',
                                backgroundPosition: 'center',
                                display: 'flex',
                                alignItems: 'center',
                                justifyContent: 'center',
                                textAlign: 'center',
                                position: 'relative'
                            }
                        }, [
                            React.createElement('div', {
                                key: 'banner-content',
                                style: { zIndex: 1 }
                            }, [
                                React.createElement('h1', {
                                    key: 'title',
                                    style: {
                                        fontSize: '3rem',
                                        fontWeight: 'bold',
                                        marginBottom: '10px',
                                        textShadow: '2px 2px 4px rgba(0,0,0,0.8)'
                                    }
                                }, departmentData.banner.title),
                                React.createElement('p', {
                                    key: 'subtitle',
                                    style: {
                                        fontSize: '1.5rem',
                                        textShadow: '1px 1px 2px rgba(0,0,0,0.8)'
                                    }
                                }, departmentData.banner.subtitle)
                            ])
                        ]),

                        // Main Content
                        React.createElement('div', {
                            key: 'main-content',
                            style: {
                                maxWidth: '1200px',
                                margin: '0 auto',
                                padding: '40px 20px'
                            }
                        }, [
                            // Chain of Command
                            React.createElement('div', {
                                key: 'command-section',
                                style: {
                                    backgroundColor: '#1a1a1a',
                                    padding: '30px',
                                    borderRadius: '10px',
                                    marginBottom: '40px',
                                    border: '2px solid #a61000'
                                }
                            }, [
                                React.createElement('div', {
                                    key: 'command-header',
                                    style: {
                                        display: 'flex',
                                        justifyContent: 'space-between',
                                        alignItems: 'center',
                                        marginBottom: '30px'
                                    }
                                }, [
                                    React.createElement('h2', {
                                        key: 'title',
                                        style: { color: '#a61000', fontSize: '2rem', fontWeight: 'bold' }
                                    }, '👑 Chain of Command'),
                                    canEdit ? React.createElement('button', {
                                        key: 'add-btn',
                                        onClick: () => setShowModal('command'),
                                        style: {
                                            padding: '10px 20px',
                                            backgroundColor: '#a61000',
                                            color: 'white',
                                            border: 'none',
                                            borderRadius: '5px',
                                            cursor: 'pointer'
                                        }
                                    }, '+ Add Member') : null
                                ]),
                                React.createElement('div', {
                                    key: 'command-grid',
                                    style: {
                                        display: 'grid',
                                        gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))',
                                        gap: '20px'
                                    }
                                }, departmentData.chainOfCommand.map(member => 
                                    React.createElement('div', {
                                        key: member.id,
                                        style: {
                                            backgroundColor: '#333',
                                            padding: '20px',
                                            borderRadius: '10px',
                                            border: '1px solid #555',
                                            position: 'relative'
                                        }
                                    }, [
                                        canEdit ? React.createElement('div', {
                                            key: 'actions',
                                            style: {
                                                position: 'absolute',
                                                top: '10px',
                                                right: '10px',
                                                display: 'flex',
                                                gap: '5px'
                                            }
                                        }, [
                                            React.createElement('button', {
                                                key: 'edit',
                                                onClick: () => setShowModal('command-edit'),
                                                style: {
                                                    padding: '5px',
                                                    backgroundColor: '#666',
                                                    color: 'white',
                                                    border: 'none',
                                                    borderRadius: '3px',
                                                    cursor: 'pointer',
                                                    fontSize: '12px'
                                                }
                                            }, '✏️'),
                                            React.createElement('button', {
                                                key: 'delete',
                                                onClick: () => deleteItem('chainOfCommand', member.id),
                                                style: {
                                                    padding: '5px',
                                                    backgroundColor: '#dc3545',
                                                    color: 'white',
                                                    border: 'none',
                                                    borderRadius: '3px',
                                                    cursor: 'pointer',
                                                    fontSize: '12px'
                                                }
                                            }, '🗑️')
                                        ]) : null,
                                        React.createElement('div', {
                                            key: 'member-info',
                                            style: { display: 'flex', alignItems: 'center', gap: '15px' }
                                        }, [
                                            React.createElement('img', {
                                                key: 'image',
                                                src: member.image,
                                                alt: member.name,
                                                style: {
                                                    width: '80px',
                                                    height: '80px',
                                                    borderRadius: '50%',
                                                    objectFit: 'cover',
                                                    border: '3px solid #a61000'
                                                }
                                            }),
                                            React.createElement('div', {
                                                key: 'details'
                                            }, [
                                                React.createElement('h3', {
                                                    key: 'name',
                                                    style: { color: 'white', marginBottom: '5px' }
                                                }, member.name),
                                                React.createElement('p', {
                                                    key: 'rank',
                                                    style: { color: '#a61000', fontWeight: 'bold', marginBottom: '10px' }
                                                }, member.rank),
                                                React.createElement('p', {
                                                    key: 'description',
                                                    style: { color: '#ccc', fontSize: '0.9rem' }
                                                }, member.description)
                                            ])
                                        ])
                                    ])
                                ))
                            ]),

                            // Subdivisions and Stats
                            React.createElement('div', {
                                key: 'subdivisions-stats',
                                style: {
                                    display: 'grid',
                                    gridTemplateColumns: '2fr 1fr',
                                    gap: '40px',
                                    marginBottom: '40px'
                                }
                            }, [
                                // Subdivisions
                                React.createElement('div', {
                                    key: 'subdivisions',
                                    style: {
                                        backgroundColor: '#1a1a1a',
                                        padding: '30px',
                                        borderRadius: '10px',
                                        border: '2px solid #a61000'
                                    }
                                }, [
                                    React.createElement('div', {
                                        key: 'sub-header',
                                        style: {
                                            display: 'flex',
                                            justifyContent: 'space-between',
                                            alignItems: 'center',
                                            marginBottom: '30px'
                                        }
                                    }, [
                                        React.createElement('h2', {
                                            key: 'title',
                                            style: { color: '#a61000', fontSize: '2rem', fontWeight: 'bold' }
                                        }, '🏢 Subdivisions'),
                                        canEdit ? React.createElement('button', {
                                            key: 'add-subdivision',
                                            onClick: () => setShowModal('subdivision'),
                                            style: {
                                                padding: '10px 20px',
                                                backgroundColor: '#a61000',
                                                color: 'white',
                                                border: 'none',
                                                borderRadius: '5px',
                                                cursor: 'pointer'
                                            }
                                        }, '+ Add Subdivision') : null
                                    ]),
                                    React.createElement('div', {
                                        key: 'subdivisions-list',
                                        style: { display: 'flex', flexDirection: 'column', gap: '15px' }
                                    }, departmentData.subdivisions.map(subdivision => 
                                        React.createElement('div', {
                                            key: subdivision.id,
                                            style: {
                                                backgroundColor: '#333',
                                                padding: '20px',
                                                borderRadius: '10px',
                                                border: '1px solid #555',
                                                position: 'relative'
                                            }
                                        }, [
                                            canEdit ? React.createElement('div', {
                                                key: 'actions',
                                                style: {
                                                    position: 'absolute',
                                                    top: '10px',
                                                    right: '10px',
                                                    display: 'flex',
                                                    gap: '5px'
                                                }
                                            }, [
                                                React.createElement('button', {
                                                    key: 'edit',
                                                    onClick: () => {
                                                        setNewItem(subdivision);
                                                        setShowModal('subdivision-edit');
                                                    },
                                                    style: {
                                                        padding: '5px',
                                                        backgroundColor: '#666',
                                                        color: 'white',
                                                        border: 'none',
                                                        borderRadius: '3px',
                                                        cursor: 'pointer',
                                                        fontSize: '12px'
                                                    }
                                                }, '✏️'),
                                                React.createElement('button', {
                                                    key: 'delete',
                                                    onClick: () => deleteItem('subdivisions', subdivision.id),
                                                    style: {
                                                        padding: '5px',
                                                        backgroundColor: '#dc3545',
                                                        color: 'white',
                                                        border: 'none',
                                                        borderRadius: '3px',
                                                        cursor: 'pointer',
                                                        fontSize: '12px'
                                                    }
                                                }, '🗑️')
                                            ]) : null,
                                            React.createElement('div', {
                                                key: 'subdivision-content',
                                                style: { display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }
                                            }, [
                                                React.createElement('div', {
                                                    key: 'info',
                                                    style: { flex: 1 }
                                                }, [
                                                    React.createElement('h3', {
                                                        key: 'name',
                                                        style: { color: 'white', marginBottom: '10px', fontSize: '1.3rem' }
                                                    }, subdivision.name),
                                                    React.createElement('p', {
                                                        key: 'description',
                                                        style: { color: '#ccc', marginBottom: '15px' }
                                                    }, subdivision.description),
                                                    React.createElement('div', {
                                                        key: 'status-badge',
                                                        style: {
                                                            display: 'inline-block',
                                                            padding: '5px 10px',
                                                            borderRadius: '15px',
                                                            fontSize: '0.8rem',
                                                            fontWeight: 'bold',
                                                            backgroundColor: subdivision.status === 'Open' ? '#28a745' : 
                                                                        subdivision.status === 'Limited' ? '#ffc107' : '#dc3545',
                                                            color: subdivision.status === 'Limited' ? '#000' : '#fff'
                                                        }
                                                    }, subdivision.status)
                                                ]),
                                                React.createElement('a', {
                                                    key: 'apply-btn',
                                                    href: subdivision.applicationLink,
                                                    style: {
                                                        padding: '10px 20px',
                                                        backgroundColor: '#a61000',
                                                        color: 'white',
                                                        textDecoration: 'none',
                                                        borderRadius: '5px',
                                                        fontWeight: 'bold',
                                                        opacity: subdivision.status === 'Closed' ? 0.5 : 1,
                                                        pointerEvents: subdivision.status === 'Closed' ? 'none' : 'auto'
                                                    }
                                                }, 'Apply Now')
                                            ])
                                        ])
                                    ))
                                ]),

                                // Department Stats
                                React.createElement('div', {
                                    key: 'stats',
                                    style: {
                                        backgroundColor: '#1a1a1a',
                                        padding: '30px',
                                        borderRadius: '10px',
                                        border: '2px solid #a61000'
                                    }
                                }, [
                                    React.createElement('h2', {
                                        key: 'stats-title',
                                        style: { color: '#a61000', fontSize: '2rem', fontWeight: 'bold', marginBottom: '30px' }
                                    }, '📊 Department Stats'),
                                    React.createElement('div', {
                                        key: 'stats-grid',
                                        style: { display: 'flex', flexDirection: 'column', gap: '15px' }
                                    }, Object.entries(departmentData.stats).map(([key, value]) => 
                                        React.createElement('div', {
                                            key: key,
                                            style: {
                                                backgroundColor: '#333',
                                                padding: '20px',
                                                borderRadius: '10px',
                                                border: '1px solid #555',
                                                textAlign: 'center'
                                            }
                                        }, [
                                            React.createElement('div', {
                                                key: 'value',
                                                style: {
                                                    fontSize: '2rem',
                                                    fontWeight: 'bold',
                                                    color: '#a61000',
                                                    marginBottom: '10px'
                                                }
                                            }, value),
                                            React.createElement('div', {
                                                key: 'label',
                                                style: {
                                                    color: '#ccc',
                                                    textTransform: 'capitalize',
                                                    fontSize: '0.9rem'
                                                }
                                            }, key.replace(/([A-Z])/g, ' $1').trim())
                                        ])
                                    ))
                                ])
                            ]),

                            // Department Documents
                            React.createElement('div', {
                                key: 'documents-section',
                                style: {
                                    backgroundColor: '#1a1a1a',
                                    padding: '30px',
                                    borderRadius: '10px',
                                    border: '2px solid #a61000'
                                }
                            }, [
                                React.createElement('div', {
                                    key: 'docs-header',
                                    style: {
                                        display: 'flex',
                                        justifyContent: 'space-between',
                                        alignItems: 'center',
                                        marginBottom: '30px'
                                    }
                                }, [
                                    React.createElement('h2', {
                                        key: 'title',
                                        style: { color: '#a61000', fontSize: '2rem', fontWeight: 'bold' }
                                    }, '📋 Department Documents'),
                                    canEdit ? React.createElement('button', {
                                        key: 'add-doc',
                                        onClick: () => setShowModal('document'),
                                        style: {
                                            padding: '10px 20px',
                                            backgroundColor: '#a61000',
                                            color: 'white',
                                            border: 'none',
                                            borderRadius: '5px',
                                            cursor: 'pointer'
                                        }
                                    }, '+ Add Document') : null
                                ]),
                                React.createElement('div', {
                                    key: 'documents-list',
                                    style: { display: 'flex', flexDirection: 'column', gap: '15px' }
                                }, departmentData.documents.map(document => 
                                    React.createElement('div', {
                                        key: document.id,
                                        style: {
                                            backgroundColor: '#333',
                                            padding: '25px',
                                            borderRadius: '10px',
                                            border: '1px solid #555',
                                            position: 'relative'
                                        }
                                    }, [
                                        canEdit ? React.createElement('div', {
                                            key: 'actions',
                                            style: {
                                                position: 'absolute',
                                                top: '15px',
                                                right: '15px',
                                                display: 'flex',
                                                gap: '5px'
                                            }
                                        }, [
                                            React.createElement('button', {
                                                key: 'edit',
                                                onClick: () => {
                                                    setNewItem(document);
                                                    setShowModal('document-edit');
                                                },
                                                style: {
                                                    padding: '5px',
                                                    backgroundColor: '#666',
                                                    color: 'white',
                                                    border: 'none',
                                                    borderRadius: '3px',
                                                    cursor: 'pointer',
                                                    fontSize: '12px'
                                                }
                                            }, '✏️'),
                                            React.createElement('button', {
                                                key: 'delete',
                                                onClick: () => deleteItem('documents', document.id),
                                                style: {
                                                    padding: '5px',
                                                    backgroundColor: '#dc3545',
                                                    color: 'white',
                                                    border: 'none',
                                                    borderRadius: '3px',
                                                    cursor: 'pointer',
                                                    fontSize: '12px'
                                                }
                                            }, '🗑️')
                                        ]) : null,
                                        React.createElement('div', {
                                            key: 'document-content',
                                            style: { display: 'grid', gridTemplateColumns: '1fr auto', gap: '20px', alignItems: 'center' }
                                        }, [
                                            React.createElement('div', {
                                                key: 'doc-info'
                                            }, [
                                                React.createElement('div', {
                                                    key: 'header',
                                                    style: { display: 'flex', alignItems: 'center', gap: '15px', marginBottom: '10px' }
                                                }, [
                                                    React.createElement('h3', {
                                                        key: 'name',
                                                        style: { color: 'white', fontSize: '1.3rem', margin: 0 }
                                                    }, document.name),
                                                    React.createElement('span', {
                                                        key: 'category',
                                                        style: {
                                                            padding: '3px 8px',
                                                            backgroundColor: '#a61000',
                                                            color: 'white',
                                                            borderRadius: '10px',
                                                            fontSize: '0.7rem',
                                                            fontWeight: 'bold'
                                                        }
                                                    }, document.category)
                                                ]),
                                                React.createElement('p', {
                                                    key: 'purpose',
                                                    style: { color: '#ccc', marginBottom: '10px' }
                                                }, document.purpose),
                                                React.createElement('p', {
                                                    key: 'updated',
                                                    style: { color: '#888', fontSize: '0.8rem' }
                                                }, `Last updated: ${new Date(document.lastUpdated).toLocaleDateString()}`)
                                            ]),
                                            React.createElement('a', {
                                                key: 'view-btn',
                                                href: document.link,
                                                target: '_blank',
                                                style: {
                                                    padding: '12px 24px',
                                                    backgroundColor: '#28a745',
                                                    color: 'white',
                                                    textDecoration: 'none',
                                                    borderRadius: '5px',
                                                    fontWeight: 'bold',
                                                    textAlign: 'center'
                                                }
                                            }, 'View Document')
                                        ])
                                    ])
                                ))
                            ])
                        ]),

                        // Modals
                        showModal && showModal.includes('command') ? React.createElement(Modal, {
                            key: 'command-modal',
                            type: 'command',
                            data: showModal === 'command-edit' ? newItem : {},
                            onClose: () => {
                                setShowModal(null);
                                setNewItem({});
                            },
                            onSave: saveCommand
                        }) : null,

                        showModal && showModal.includes('subdivision') ? React.createElement(Modal, {
                            key: 'subdivision-modal',
                            type: 'subdivision',
                            data: showModal === 'subdivision-edit' ? newItem : {},
                            onClose: () => {
                                setShowModal(null);
                                setNewItem({});
                            },
                            onSave: saveSubdivision
                        }) : null,

                        showModal && showModal.includes('document') ? React.createElement(Modal, {
                            key: 'document-modal',
                            type: 'document',
                            data: showModal === 'document-edit' ? newItem : {},
                            onClose: () => {
                                setShowModal(null);
                                setNewItem({});
                            },
                            onSave: saveDocument
                        }) : null
                    ]);
                };

                // Render department pages
                window.renderDepartmentPage = function(department) {
                    const departmentRoot = document.getElementById(`${department.toLowerCase()}-content`);
                    if (!departmentRoot) {
                        console.log(`${department} content root not found`);
                        return;
                    }

                    console.log(`Rendering ${department} department page...`);
                    try {
                        ReactDOM.render(React.createElement(DepartmentPage, { department }), departmentRoot);
                        console.log(`${department} department page rendered successfully`);
                    } catch (error) {
                        console.error(`Error rendering ${department} department page:`, error);
                    }
                };

                // Override showDashboardTab to render department pages
                const originalShowDashboardTab = window.showDashboardTab;
                window.showDashboardTab = function(tabName) {
                    console.log('Showing dashboard tab:', tabName);
                    
                    // Call original function first
                    if (originalShowDashboardTab) {
                        originalShowDashboardTab.call(this, tabName);
                    }
                    
                    // If department tab is shown, render the React component
                    if (['kcso', 'msp', 'mfd'].includes(tabName)) {
                        setTimeout(() => {
                            window.renderDepartmentPage(tabName.toUpperCase());
                        }, 100);
                    }
                    
                    // Also handle staff tab
                    if (tabName === 'staff' && window.renderStaffComponent) {
                        setTimeout(() => {
                            window.renderStaffComponent();
                        }, 100);
                    }
                };

                console.log('Department pages integration initialized');
            }

            // Initialize when DOM is ready
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initializeDepartmentPages);
            } else {
                initializeDepartmentPages();
            }
        })();
    </script>





</body>
</html>